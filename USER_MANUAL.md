# Movie Data Capture Go ä½¿ç”¨æ‰‹å†Œ

## ğŸ“– ç›®å½•

1. [ç®€ä»‹](#ç®€ä»‹)
2. [å®‰è£…æŒ‡å—](#å®‰è£…æŒ‡å—)
3. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
4. [é…ç½®è¯¦è§£](#é…ç½®è¯¦è§£)
5. [ä½¿ç”¨æ¨¡å¼](#ä½¿ç”¨æ¨¡å¼)
6. [é«˜çº§åŠŸèƒ½](#é«˜çº§åŠŸèƒ½)
7. [å‘½ä»¤è¡Œå‚æ•°](#å‘½ä»¤è¡Œå‚æ•°)
8. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
9. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
10. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ç®€ä»‹

Movie Data Capture Goï¼ˆç®€ç§°MDC-Goï¼‰æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ç”µå½±å…ƒæ•°æ®è‡ªåŠ¨æŠ“å–å’Œæ•´ç†å·¥å…·ã€‚å®ƒèƒ½å¤Ÿï¼š

- ğŸ” **æ™ºèƒ½è¯†åˆ«**: è‡ªåŠ¨ä»æ–‡ä»¶åæå–ç•ªå·ä¿¡æ¯
- ğŸŒ **å¤šç«™ç‚¹æŠ“å–**: ä»å¤šä¸ªæ•°æ®æºè·å–å®Œæ•´çš„ç”µå½±ä¿¡æ¯
- ğŸ“ **NFOç”Ÿæˆ**: åˆ›å»ºç¬¦åˆKodi/Jellyfinæ ‡å‡†çš„å…ƒæ•°æ®æ–‡ä»¶
- ğŸ–¼ï¸ **å›¾ç‰‡å¤„ç†**: ä¸‹è½½å°é¢ã€æµ·æŠ¥ã€å‰§ç…§å¹¶è‡ªåŠ¨å¤„ç†
- ğŸ“ **æ™ºèƒ½æ•´ç†**: æŒ‰ç…§è‡ªå®šä¹‰è§„åˆ™æ•´ç†æ–‡ä»¶ç›®å½•ç»“æ„
- ğŸ”— **å¤šç§æ¨¡å¼**: æ”¯æŒç§»åŠ¨ã€è½¯é“¾æ¥ã€ç¡¬é“¾æ¥å’ŒSTRMæ–‡ä»¶
- ğŸ­ **åˆ†ç‰‡å¤„ç†**: æ™ºèƒ½å¤„ç†å¤šéƒ¨åˆ†ç”µå½±æ–‡ä»¶

---

## å®‰è£…æŒ‡å—

### ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Windows 10+ã€Linuxã€macOS
- **Goç‰ˆæœ¬**: 1.21 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆä»…æºç ç¼–è¯‘ï¼‰
- **ç½‘ç»œ**: ç¨³å®šçš„ç½‘ç»œè¿æ¥ï¼ˆå»ºè®®é…ç½®ä»£ç†ï¼‰
- **å­˜å‚¨**: è‡³å°‘1GBå¯ç”¨ç©ºé—´

### æ–¹æ³•1ï¼šä¸‹è½½é¢„ç¼–è¯‘ç‰ˆæœ¬

1. è®¿é—® [GitHub Releases](https://github.com/Feng4/movie_data_capture_go/releases)
2. æ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©å¯¹åº”ç‰ˆæœ¬ï¼š
   - Windows: `mdc-windows-amd64.zip`
   - Linux: `mdc-linux-amd64.tar.gz`
   - macOS: `mdc-darwin-amd64.tar.gz` æˆ– `mdc-darwin-arm64.tar.gz`ï¼ˆM1/M2èŠ¯ç‰‡ï¼‰

3. è§£å‹åˆ°ä»»æ„ç›®å½•
4. ç¡®ä¿å¯æ‰§è¡Œæ–‡ä»¶æœ‰è¿è¡Œæƒé™ï¼ˆLinux/macOSï¼‰ï¼š
   ```bash
   chmod +x mdc
   ```

### æ–¹æ³•2ï¼šæºç ç¼–è¯‘

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/Feng4/movie_data_capture_go.git
cd movie_data_capture_go

# ä¸‹è½½ä¾èµ–
go mod download

# ç¼–è¯‘ç¨‹åº
go build -o mdc main.go

# è¿è¡Œç¨‹åº
./mdc --version
```

### éªŒè¯å®‰è£…

```bash
./mdc --version
# è¾“å‡º: Movie Data Capture Go Version 1.0.0
```

---

## å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ¬¡è¿è¡Œ

1. **åˆå§‹åŒ–é…ç½®**ï¼š
   ```bash
   ./mdc
   # ç¨‹åºä¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤çš„config.yamlé…ç½®æ–‡ä»¶
   ```

2. **ç¼–è¾‘é…ç½®æ–‡ä»¶**ï¼š
   ```yaml
   # åŸºæœ¬é…ç½®ç¤ºä¾‹
   common:
     main_mode: 1                    # åˆ®å‰Šæ¨¡å¼
     source_folder: "./movies"       # æºæ–‡ä»¶å¤¹
     link_mode: 0                    # ç§»åŠ¨æ–‡ä»¶æ¨¡å¼
   
   proxy:
     switch: true                    # å¯ç”¨ä»£ç†ï¼ˆæ¨èï¼‰
     proxy: "127.0.0.1:10808"       # ä»£ç†åœ°å€
     type: "socks5"                 # ä»£ç†ç±»å‹
   ```

3. **å¤„ç†ç¬¬ä¸€ä¸ªæ–‡ä»¶**ï¼š
   ```bash
   ./mdc -file "SSIS-001.mp4"
   ```

### åŸºæœ¬ä½¿ç”¨æµç¨‹

1. **å‡†å¤‡ç”µå½±æ–‡ä»¶**: ç¡®ä¿æ–‡ä»¶ååŒ…å«å¯è¯†åˆ«çš„ç•ªå·
2. **é…ç½®ç¨‹åº**: æ ¹æ®éœ€æ±‚ä¿®æ”¹`config.yaml`
3. **è¿è¡Œç¨‹åº**: ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æ§åˆ¶è¡Œä¸º
4. **æŸ¥çœ‹ç»“æœ**: æ£€æŸ¥ç”Ÿæˆçš„NFOæ–‡ä»¶å’Œæ•´ç†åçš„ç›®å½•ç»“æ„

---

## é…ç½®è¯¦è§£

### é…ç½®æ–‡ä»¶ç»“æ„

é…ç½®æ–‡ä»¶`config.yaml`åŒ…å«ä»¥ä¸‹ä¸»è¦éƒ¨åˆ†ï¼š

```yaml
# é€šç”¨é…ç½®
common:
  main_mode: 1                      # è¿è¡Œæ¨¡å¼
  source_folder: "./"               # æºæ–‡ä»¶å¤¹
  success_output_folder: "JAV_output"  # æˆåŠŸè¾“å‡ºæ–‡ä»¶å¤¹
  failed_output_folder: "failed"   # å¤±è´¥è¾“å‡ºæ–‡ä»¶å¤¹
  link_mode: 0                      # æ–‡ä»¶å¤„ç†æ¨¡å¼

# ç½‘ç»œä»£ç†é…ç½®
proxy:
  switch: true                      # å¯ç”¨ä»£ç†
  proxy: "127.0.0.1:10808"         # ä»£ç†åœ°å€
  type: "socks5"                   # ä»£ç†ç±»å‹
  timeout: 30                       # è¶…æ—¶æ—¶é—´
  retry: 5                          # é‡è¯•æ¬¡æ•°

# å‘½åè§„åˆ™é…ç½®
name_rule:
  location_rule: "actor + '/' + number"     # ç›®å½•ç»“æ„è§„åˆ™
  naming_rule: "number + '-' + title"       # æ–‡ä»¶å‘½åè§„åˆ™
  max_title_len: 50                         # æœ€å¤§æ ‡é¢˜é•¿åº¦

# ç½‘ç«™ä¼˜å…ˆçº§é…ç½®
priority:
  website: "javbus,javdb,fanza,xcity,mgstage"

# è°ƒè¯•æ¨¡å¼é…ç½®
debug_mode:
  switch: false                     # å¯ç”¨è°ƒè¯•æ¨¡å¼

# å…¶ä»–åŠŸèƒ½é…ç½®...
```

### æ ¸å¿ƒé…ç½®å‚æ•°è¯¦è§£

#### 1. è¿è¡Œæ¨¡å¼ (main_mode)

```yaml
common:
  main_mode: 1    # 1=åˆ®å‰Š, 2=æ•´ç†, 3=åˆ†æ
```

- **æ¨¡å¼1ï¼ˆåˆ®å‰Šï¼‰**: å®Œæ•´çš„åˆ®å‰Šæµç¨‹ï¼Œä¸‹è½½å›¾ç‰‡ï¼Œç”ŸæˆNFOï¼Œæ•´ç†æ–‡ä»¶
- **æ¨¡å¼2ï¼ˆæ•´ç†ï¼‰**: ä»…æ•´ç†æ–‡ä»¶ï¼Œä¸åˆ®å‰Šæ•°æ®
- **æ¨¡å¼3ï¼ˆåˆ†æï¼‰**: ä»…ç”ŸæˆNFOï¼Œä¸ç§»åŠ¨æ–‡ä»¶

#### 2. æ–‡ä»¶å¤„ç†æ¨¡å¼ (link_mode)

```yaml
common:
  link_mode: 0    # 0=ç§»åŠ¨, 1=è½¯é“¾æ¥, 2=ç¡¬é“¾æ¥
```

- **0ï¼ˆç§»åŠ¨ï¼‰**: å°†æ–‡ä»¶ç§»åŠ¨åˆ°è¾“å‡ºç›®å½•
- **1ï¼ˆè½¯é“¾æ¥ï¼‰**: åˆ›å»ºè½¯é“¾æ¥ï¼ŒåŸæ–‡ä»¶ä¿æŒä¸å˜
- **2ï¼ˆç¡¬é“¾æ¥ï¼‰**: åˆ›å»ºç¡¬é“¾æ¥ï¼Œå¤±è´¥æ—¶å›é€€åˆ°è½¯é“¾æ¥

#### 3. å‘½åè§„åˆ™é…ç½®

```yaml
name_rule:
  location_rule: "actor + '/' + number"      # ç›®å½•ç»“æ„
  naming_rule: "number + '-' + title"        # æ–‡ä»¶å‘½å
  max_title_len: 50                          # æ ‡é¢˜é•¿åº¦é™åˆ¶
  number_uppercase: false                    # ç•ªå·å¤§å†™
```

**å¯ç”¨å˜é‡**:
- `actor`: æ¼”å‘˜å
- `number`: ç•ªå·
- `title`: æ ‡é¢˜
- `year`: å¹´ä»½
- `studio`: åˆ¶ä½œå•†
- `label`: ç³»åˆ—

**ç¤ºä¾‹**:
```yaml
location_rule: "studio + '/' + actor + '/' + number"
# è¾“å‡º: S1_NO.1_STYLE/è‘µã¤ã‹ã•/SSIS-001/

naming_rule: "actor + '_' + number + '_' + title"
# è¾“å‡º: è‘µã¤ã‹ã•_SSIS-001_ç¾ã—ã„äººå¦»ã®ç§˜å¯†.mp4
```

#### 4. ç½‘ç»œä»£ç†é…ç½®

```yaml
proxy:
  switch: true                      # å¯ç”¨ä»£ç†
  proxy: "127.0.0.1:10808"         # ä»£ç†åœ°å€:ç«¯å£
  type: "socks5"                    # ä»£ç†ç±»å‹
  timeout: 30                       # è¶…æ—¶æ—¶é—´(ç§’)
  retry: 5                          # é‡è¯•æ¬¡æ•°
```

**æ”¯æŒçš„ä»£ç†ç±»å‹**:
- `http`: HTTPä»£ç†
- `socks5`: SOCKS5ä»£ç†
- `socks5h`: SOCKS5ä»£ç†(DNSé€šè¿‡ä»£ç†è§£æ)

#### 5. æ•°æ®æºä¼˜å…ˆçº§

```yaml
priority:
  website: "javbus,javdb,fanza,xcity,mgstage,fc2,fc2club"
```

ç¨‹åºä¼šæŒ‰ç…§é…ç½®çš„é¡ºåºå°è¯•ä»å„ä¸ªç½‘ç«™è·å–æ•°æ®ï¼Œç›´åˆ°æˆåŠŸã€‚

**æ”¯æŒçš„æ•°æ®æº**:
- `javbus`: JavBus (ä¸»è¦æ¨è)
- `javdb`: JavDB
- `fanza`: FANZA (å®˜æ–¹æ•°æ®ï¼Œè´¨é‡é«˜)
- `fc2`: FC2 (ç´ äººä½œå“)
- `xcity`: X-City (æ— ç ä½œå“)
- `mgstage`: MGStage
- å…¶ä»–...

---

## ä½¿ç”¨æ¨¡å¼

### æ¨¡å¼1ï¼šå®Œæ•´åˆ®å‰Šæ¨¡å¼

**ç‰¹ç‚¹**: å®Œæ•´çš„æ•°æ®æŠ“å–ã€å›¾ç‰‡ä¸‹è½½ã€NFOç”Ÿæˆã€æ–‡ä»¶æ•´ç†

**é…ç½®**:
```yaml
common:
  main_mode: 1
  link_mode: 0                      # ç§»åŠ¨æ–‡ä»¶
```

**ä½¿ç”¨åœºæ™¯**: 
- åˆæ¬¡æ•´ç†ç”µå½±åº“
- éœ€è¦å®Œæ•´å…ƒæ•°æ®çš„åœºæ™¯
- å¸Œæœ›é‡æ–°ç»„ç»‡æ–‡ä»¶ç»“æ„

**ç¤ºä¾‹**:
```bash
# å¤„ç†å•ä¸ªæ–‡ä»¶
./mdc -file "SSIS-001.mp4"

# æ‰¹é‡å¤„ç†ç›®å½•
./mdc -path "/path/to/movies"
```

### æ¨¡å¼2ï¼šæ–‡ä»¶æ•´ç†æ¨¡å¼

**ç‰¹ç‚¹**: ä»…æ•´ç†æ–‡ä»¶ï¼Œä¸è·å–ç½‘ç»œæ•°æ®

**é…ç½®**:
```yaml
common:
  main_mode: 2
```

**ä½¿ç”¨åœºæ™¯**:
- æ–‡ä»¶å·²æœ‰æ­£ç¡®å‘½åï¼Œä»…éœ€æ•´ç†
- ç½‘ç»œæ¡ä»¶ä¸å¥½çš„æƒ…å†µ
- å¿«é€Ÿæ•´ç†å¤§é‡æ–‡ä»¶

### æ¨¡å¼3ï¼šåˆ†ææ¨¡å¼

**ç‰¹ç‚¹**: ç”ŸæˆNFOä½†ä¸ç§»åŠ¨æ–‡ä»¶ï¼Œé€‚åˆé¢„è§ˆæ•ˆæœ

**é…ç½®**:
```yaml
common:
  main_mode: 3
```

**ä½¿ç”¨åœºæ™¯**:
- æµ‹è¯•é…ç½®æ•ˆæœ
- ä»…éœ€NFOæ–‡ä»¶
- ä¸æƒ³æ”¹å˜åŸå§‹æ–‡ä»¶ä½ç½®

### è½¯é“¾æ¥æ¨¡å¼

**ç‰¹ç‚¹**: åˆ›å»ºè½¯é“¾æ¥ï¼ŒåŸæ–‡ä»¶ä½ç½®ä¸å˜

**é…ç½®**:
```yaml
common:
  main_mode: 1
  link_mode: 1                      # è½¯é“¾æ¥
```

**ä¼˜åŠ¿**:
- èŠ‚çœå­˜å‚¨ç©ºé—´
- ä¿æŒåŸå§‹æ–‡ä»¶ä¸å˜
- å¯ä»¥åˆ›å»ºå¤šä¸ªåª’ä½“åº“è§†å›¾

**ç¤ºä¾‹è¾“å‡ºç»“æ„**:
```
åŸå§‹ä½ç½®:
/movies/raw/SSIS-001.mp4

æ•´ç†å:
/movies/organized/è‘µã¤ã‹ã•/SSIS-001-ç¾ã—ã„äººå¦»ã®ç§˜å¯†/
â”œâ”€â”€ SSIS-001-ç¾ã—ã„äººå¦»ã®ç§˜å¯†.mp4 -> /movies/raw/SSIS-001.mp4
â”œâ”€â”€ SSIS-001-ç¾ã—ã„äººå¦»ã®ç§˜å¯†.nfo
â”œâ”€â”€ poster.jpg
â””â”€â”€ fanart.jpg
```

---

## é«˜çº§åŠŸèƒ½

### 1. STRMæ–‡ä»¶ç”Ÿæˆ

**åŠŸèƒ½**: ä¸ºåª’ä½“ä¸­å¿ƒç”ŸæˆSTRMæ–‡ä»¶ï¼Œå®ç°æ— æ–‡ä»¶ç§»åŠ¨çš„æ’­æ”¾

**é…ç½®**:
```yaml
strm:
  enable: true                      # å¯ç”¨STRMåŠŸèƒ½
  path_type: "absolute"             # è·¯å¾„ç±»å‹
  content_mode: "detailed"          # å†…å®¹æ¨¡å¼
  multipart_mode: "separate"        # åˆ†ç‰‡å¤„ç†æ¨¡å¼
```

**è·¯å¾„ç±»å‹**:
- `absolute`: ç»å¯¹è·¯å¾„ `/home/user/movies/file.mp4`
- `relative`: ç›¸å¯¹è·¯å¾„ `../movies/file.mp4`
- `network`: ç½‘ç»œè·¯å¾„ `\\server\movies\file.mp4`

**å†…å®¹æ¨¡å¼**:
- `simple`: ä»…åŒ…å«æ–‡ä»¶è·¯å¾„
- `detailed`: åŒ…å«è¯¦ç»†æ³¨é‡Šå’Œå…ƒæ•°æ®
- `playlist`: M3Uæ’­æ”¾åˆ—è¡¨æ ¼å¼

**ç½‘ç»œè·¯å¾„é…ç½®ç¤ºä¾‹**:
```yaml
strm:
  enable: true
  path_type: "network"
  network_base_path: "\\\\nas-server\\movies"
  use_windows_path: true
```

### 2. åˆ†ç‰‡æ–‡ä»¶å¤„ç†

**åŠŸèƒ½**: è‡ªåŠ¨è¯†åˆ«å’Œå¤„ç†å¤šéƒ¨åˆ†ç”µå½±æ–‡ä»¶

**æ”¯æŒçš„æ ¼å¼**:
- CDæ ¼å¼: `SSIS-001-cd1.mp4`, `SSIS-001-cd2.mp4`
- Partæ ¼å¼: `SSIS-001_part_1.mp4`, `SSIS-001_part_2.mp4`
- æ•°å­—æ ¼å¼: `SSIS-001_1.mp4`, `SSIS-001_2.mp4`
- å­—æ¯æ ¼å¼: `SSIS-001-A.mp4`, `SSIS-001-B.mp4`
- Discæ ¼å¼: `SSIS-001-disc1.mkv`, `SSIS-001-disc2.mkv`

**å¤„ç†æ¨¡å¼**:
```yaml
strm:
  multipart_mode: "separate"        # ä¸ºæ¯ä¸ªåˆ†ç‰‡åˆ›å»ºå•ç‹¬æ–‡ä»¶
  # æˆ–
  multipart_mode: "combined"        # åˆ›å»ºå•ä¸ªåŒ…å«æ‰€æœ‰åˆ†ç‰‡çš„æ–‡ä»¶
```

### 3. å›¾åƒå¤„ç†åŠŸèƒ½

#### äººè„¸è¯†åˆ«è£å‰ª
```yaml
face:
  locations_model: "hog"            # äººè„¸æ£€æµ‹æ¨¡å‹
  uncensored_only: true             # ä»…å¯¹æ— ç å½±ç‰‡å¤„ç†
  always_imagecut: false            # æ€»æ˜¯æ‰§è¡Œè£å‰ª
  aspect_ratio: 2.12                # å›¾ç‰‡å®½é«˜æ¯”
```

#### æ°´å°å¤„ç†
```yaml
watermark:
  switch: true                      # å¯ç”¨æ°´å°
  water: 2                         # æ°´å°ä½ç½® (1-4)
```

#### é¢å¤–å°é¢å›¾
```yaml
extrafanart:
  switch: true                      # ä¸‹è½½é¢å¤–å°é¢å›¾
  extrafanart_folder: "extrafanart" # é¢å¤–å°é¢å›¾æ–‡ä»¶å¤¹
  parallel_download: 1              # å¹¶è¡Œä¸‹è½½æ•°
```

### 4. ç¿»è¯‘åŠŸèƒ½

```yaml
translate:
  switch: true                      # å¯ç”¨ç¿»è¯‘
  engine: "google-free"             # ç¿»è¯‘å¼•æ“
  target_language: "zh_cn"          # ç›®æ ‡è¯­è¨€
  values: "title,outline"           # ç¿»è¯‘å­—æ®µ
  delay: 1                          # ç¿»è¯‘å»¶è¿Ÿ
```

### 5. æ€§èƒ½ä¼˜åŒ–

#### å¤šçº¿ç¨‹å¤„ç†
```yaml
common:
  multi_threading: 4                # å¹¶å‘æ•° (0=é¡ºåºå¤„ç†)
```

#### ç¼“å­˜æ§åˆ¶
```yaml
common:
  mapping_table_validity: 7         # æ˜ å°„è¡¨æœ‰æ•ˆæœŸ(å¤©)
  download_only_missing_images: true # ä»…ä¸‹è½½ç¼ºå¤±å›¾ç‰‡
```

---

## å‘½ä»¤è¡Œå‚æ•°

### åŸºæœ¬å‚æ•°

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `-config` | æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„ | `-config /path/to/config.yaml` |
| `-file` | å¤„ç†å•ä¸ªæ–‡ä»¶ | `-file "SSIS-001.mp4"` |
| `-path` | å¤„ç†æŒ‡å®šç›®å½• | `-path "/movies"` |
| `-mode` | è¦†ç›–é…ç½®ä¸­çš„è¿è¡Œæ¨¡å¼ | `-mode 1` |
| `-number` | æŒ‡å®šç•ªå·(è¦†ç›–è‡ªåŠ¨è¯†åˆ«) | `-number "SSIS-001"` |

### æ•°æ®æºå‚æ•°

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `-search` | ä»…æœç´¢æŒ‡å®šç•ªå· | `-search "SSIS-001"` |
| `-source` | æŒ‡å®šæ•°æ®æº | `-source "javbus"` |
| `-url` | æŒ‡å®šå…·ä½“URL | `-url "https://..."` |

### è°ƒè¯•å‚æ•°

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `-debug` | å¯ç”¨è°ƒè¯•æ¨¡å¼ | `-debug` |
| `-logdir` | æŒ‡å®šæ—¥å¿—ç›®å½• | `-logdir "./logs"` |
| `-version` | æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ | `-version` |

### ä½¿ç”¨ç¤ºä¾‹

```bash
# åŸºæœ¬ä½¿ç”¨
./mdc -file "SSIS-001.mp4"

# ä½¿ç”¨æŒ‡å®šé…ç½®æ–‡ä»¶
./mdc -config custom.yaml -path "/movies"

# å¼ºåˆ¶æŒ‡å®šç•ªå·
./mdc -file "movie.mp4" -number "SSIS-001"

# ä»…æœç´¢ä¸å¤„ç†
./mdc -search "SSIS-001" -source "javbus"

# è°ƒè¯•æ¨¡å¼å¤„ç†
./mdc -debug -file "SSIS-001.mp4" -logdir "./debug_logs"

# è¦†ç›–è¿è¡Œæ¨¡å¼
./mdc -mode 3 -path "/movies"  # åˆ†ææ¨¡å¼æ‰¹é‡å¤„ç†
```

---

## æ•…éšœæ’é™¤

### å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

#### 1. ç½‘ç»œè¿æ¥é—®é¢˜

**ç°è±¡**:
```
Error: Failed to fetch data from website
Error: Connection timeout
```

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. é…ç½®ä»£ç†è®¾ç½®ï¼š
   ```yaml
   proxy:
     switch: true
     proxy: "127.0.0.1:10808"
     type: "socks5"
   ```
3. å¢åŠ è¶…æ—¶æ—¶é—´ï¼š
   ```yaml
   proxy:
     timeout: 60
     retry: 10
   ```

#### 2. ç•ªå·è¯†åˆ«å¤±è´¥

**ç°è±¡**:
```
Error: Cannot extract number from filename
Error: No data found for number
```

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥æ–‡ä»¶åæ ¼å¼
2. ä½¿ç”¨`-number`å‚æ•°æ‰‹åŠ¨æŒ‡å®šï¼š
   ```bash
   ./mdc -file "movie.mp4" -number "SSIS-001"
   ```
3. æ£€æŸ¥è‡ªå®šä¹‰æ­£åˆ™è¡¨è¾¾å¼ï¼š
   ```yaml
   name_rule:
     number_regexs: "custom_pattern"
   ```

#### 3. æƒé™é—®é¢˜

**ç°è±¡**:
```
Error: Permission denied
Error: Failed to create directory
```

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥æ–‡ä»¶å¤¹æƒé™
2. ä½¿ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œï¼ˆWindowsï¼‰
3. ä¿®æ”¹æ–‡ä»¶å¤¹æƒé™ï¼ˆLinux/macOSï¼‰ï¼š
   ```bash
   chmod 755 /path/to/folder
   ```

#### 4. å›¾ç‰‡ä¸‹è½½å¤±è´¥

**ç°è±¡**:
```
Error: Failed to download image
Error: Invalid image URL
```

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œä»£ç†è®¾ç½®
2. å¯ç”¨ä»…ä¸‹è½½ç¼ºå¤±å›¾ç‰‡ï¼š
   ```yaml
   common:
     download_only_missing_images: true
   ```
3. æ£€æŸ¥è¾“å‡ºç›®å½•æƒé™

### è°ƒè¯•æŠ€å·§

#### 1. å¯ç”¨è¯¦ç»†æ—¥å¿—

```bash
./mdc -debug -logdir "./logs" -file "test.mp4"
```

#### 2. æµ‹è¯•ç½‘ç»œè¿æ¥

```bash
./mdc -search "SSIS-001" -source "javbus" -debug
```

#### 3. éªŒè¯é…ç½®æ–‡ä»¶

```bash
./mdc -config config.yaml -version
```

#### 4. æ£€æŸ¥åˆ†ç‰‡è¯†åˆ«

åˆ›å»ºæµ‹è¯•æ–‡ä»¶å¹¶è¿è¡Œåˆ†ç‰‡æµ‹è¯•å·¥å…·ï¼š
```bash
go run test_fragment_detection.go
```

---

## æœ€ä½³å®è·µ

### 1. ç›®å½•ç»“æ„è§„åˆ’

**æ¨èç»“æ„**:
```
/media/
â”œâ”€â”€ raw_movies/           # åŸå§‹æ–‡ä»¶
â”œâ”€â”€ organized/            # æ•´ç†åçš„æ–‡ä»¶
â”‚   â”œâ”€â”€ JAV/             # æœ‰ç ä½œå“
â”‚   â””â”€â”€ Uncensored/      # æ— ç ä½œå“
â”œâ”€â”€ failed/              # å¤„ç†å¤±è´¥çš„æ–‡ä»¶
â””â”€â”€ config/              # é…ç½®æ–‡ä»¶ç›®å½•
```

**å¯¹åº”é…ç½®**:
```yaml
common:
  source_folder: "/media/raw_movies"
  success_output_folder: "/media/organized/JAV"
  failed_output_folder: "/media/failed"
```

### 2. ä»£ç†é…ç½®å»ºè®®

**æ¨èä»£ç†è½¯ä»¶**:
- Clash
- V2Ray
- Shadowsocks

**ä»£ç†é…ç½®æ¨¡æ¿**:
```yaml
proxy:
  switch: true
  proxy: "127.0.0.1:10808"          # Clashé»˜è®¤ç«¯å£
  type: "socks5"
  timeout: 30
  retry: 5
```

### 3. æ‰¹é‡å¤„ç†ç­–ç•¥

**å°æ‰¹é‡å¤„ç†** (æ¨è):
```bash
# åˆ†æ‰¹å¤„ç†ï¼Œä¾¿äºç›‘æ§å’Œé”™è¯¯å¤„ç†
./mdc -path "/movies/batch1" -debug
./mdc -path "/movies/batch2" -debug
```

**å¤šçº¿ç¨‹é…ç½®**:
```yaml
common:
  multi_threading: 2                # å»ºè®®ä¸è¶…è¿‡4
```

### 4. åª’ä½“ä¸­å¿ƒé›†æˆ

#### Kodié…ç½®
1. å¯ç”¨NFOå’Œå›¾ç‰‡ï¼š
   ```yaml
   # NFOæ ‡å‡†æ ¼å¼
   nfo: true
   extrafanart:
     switch: true
   ```

2. ç›®å½•ç»“æ„ä¼˜åŒ–ï¼š
   ```yaml
   name_rule:
     location_rule: "actor + '/' + number"
     naming_rule: "number + ' - ' + title"
   ```

#### Jellyfin/Embyé…ç½®
1. å¯ç”¨STRMæ¨¡å¼ï¼š
   ```yaml
   strm:
     enable: true
     content_mode: "detailed"
   ```

2. ä½¿ç”¨è½¯é“¾æ¥æ¨¡å¼ï¼š
   ```yaml
   common:
     link_mode: 1
   ```

### 5. å­˜å‚¨ä¼˜åŒ–

**ä½¿ç”¨è½¯é“¾æ¥èŠ‚çœç©ºé—´**:
```yaml
common:
  link_mode: 1                      # è½¯é“¾æ¥æ¨¡å¼
strm:
  enable: true                      # é…åˆSTRMæ–‡ä»¶
```

**å®šæœŸæ¸…ç†**:
```yaml
common:
  del_empty_folder: true            # åˆ é™¤ç©ºæ–‡ä»¶å¤¹
  failed_move: true                 # ç§»åŠ¨å¤±è´¥æ–‡ä»¶
```

---

## å¸¸è§é—®é¢˜

### Q1: ç¨‹åºæ— æ³•è¯†åˆ«ç•ªå·æ€ä¹ˆåŠï¼Ÿ

**A**: 
1. æ£€æŸ¥æ–‡ä»¶åæ˜¯å¦åŒ…å«æ¸…æ™°çš„ç•ªå·æ ¼å¼
2. ä½¿ç”¨`-number`å‚æ•°æ‰‹åŠ¨æŒ‡å®šç•ªå·
3. è°ƒæ•´ç•ªå·æå–çš„æ­£åˆ™è¡¨è¾¾å¼é…ç½®
4. æŸ¥çœ‹è°ƒè¯•æ—¥å¿—äº†è§£è¯†åˆ«è¿‡ç¨‹

### Q2: ä¸‹è½½é€Ÿåº¦å¾ˆæ…¢æˆ–ç»å¸¸å¤±è´¥ï¼Ÿ

**A**:
1. é…ç½®ç¨³å®šçš„ä»£ç†æœåŠ¡å™¨
2. å¢åŠ é‡è¯•æ¬¡æ•°å’Œè¶…æ—¶æ—¶é—´
3. å¯ç”¨"ä»…ä¸‹è½½ç¼ºå¤±å›¾ç‰‡"é€‰é¡¹
4. æ£€æŸ¥ç½‘ç»œè¿æ¥ç¨³å®šæ€§

### Q3: ç”Ÿæˆçš„NFOæ–‡ä»¶åœ¨åª’ä½“ä¸­å¿ƒä¸­ä¸æ˜¾ç¤ºï¼Ÿ

**A**:
1. ç¡®è®¤NFOæ–‡ä»¶åä¸è§†é¢‘æ–‡ä»¶åä¸€è‡´
2. æ£€æŸ¥åª’ä½“ä¸­å¿ƒçš„åˆ®å‰Šå™¨è®¾ç½®
3. éªŒè¯NFOæ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®
4. ç¡®è®¤åª’ä½“ä¸­å¿ƒæ”¯æŒçš„NFOæ ¼å¼

### Q4: åˆ†ç‰‡æ–‡ä»¶æ²¡æœ‰è¢«æ­£ç¡®è¯†åˆ«ï¼Ÿ

**A**:
1. æ£€æŸ¥åˆ†ç‰‡æ–‡ä»¶å‘½åæ ¼å¼
2. è¿è¡Œåˆ†ç‰‡æµ‹è¯•å·¥å…·éªŒè¯
3. æŸ¥çœ‹æ”¯æŒçš„åˆ†ç‰‡æ ¼å¼åˆ—è¡¨
4. æ‰‹åŠ¨é‡å‘½åæ–‡ä»¶ä»¥ç¬¦åˆæ”¯æŒæ ¼å¼

### Q5: è½¯é“¾æ¥åœ¨Windowsä¸‹ä¸å·¥ä½œï¼Ÿ

**A**:
1. ç¡®ä¿ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œ
2. æ£€æŸ¥Windowsç‰ˆæœ¬æ˜¯å¦æ”¯æŒè½¯é“¾æ¥
3. è€ƒè™‘ä½¿ç”¨ç¡¬é“¾æ¥æ¨¡å¼
4. éªŒè¯ç›®æ ‡æ–‡ä»¶ç³»ç»Ÿæ”¯æŒé“¾æ¥

### Q6: å¦‚ä½•æ‰¹é‡å¤„ç†å¤§é‡æ–‡ä»¶ï¼Ÿ

**A**:
1. å»ºè®®åˆ†æ‰¹å¤„ç†ï¼Œæ¯æ‰¹ä¸è¶…è¿‡100ä¸ªæ–‡ä»¶
2. ä½¿ç”¨é€‚å½“çš„å¤šçº¿ç¨‹è®¾ç½®ï¼ˆ2-4çº¿ç¨‹ï¼‰
3. ç›‘æ§ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
4. ä½¿ç”¨è°ƒè¯•æ¨¡å¼è·Ÿè¸ªå¤„ç†è¿›åº¦

### Q7: STRMæ–‡ä»¶åœ¨åª’ä½“ä¸­å¿ƒä¸­æ— æ³•æ’­æ”¾ï¼Ÿ

**A**:
1. æ£€æŸ¥STRMæ–‡ä»¶ä¸­çš„è·¯å¾„æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤åª’ä½“ä¸­å¿ƒèƒ½è®¿é—®æºæ–‡ä»¶ä½ç½®
3. éªŒè¯ç½‘ç»œè·¯å¾„é…ç½®ï¼ˆå¦‚æœä½¿ç”¨ç½‘ç»œå­˜å‚¨ï¼‰
4. æµ‹è¯•STRMæ–‡ä»¶éªŒè¯åŠŸèƒ½

### Q8: é…ç½®æ–‡ä»¶è¢«é‡ç½®äº†ï¼Ÿ

**A**:
1. å¤‡ä»½è‡ªå®šä¹‰é…ç½®æ–‡ä»¶
2. æ£€æŸ¥é…ç½®æ–‡ä»¶æƒé™
3. ä½¿ç”¨`-config`å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶ä½ç½®
4. éªŒè¯YAMLè¯­æ³•æ ¼å¼æ­£ç¡®æ€§

---

## æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©

- ğŸ“– **æ–‡æ¡£**: æŸ¥çœ‹å®Œæ•´çš„é¡¹ç›®æ–‡æ¡£
- ğŸ› **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/Feng4/movie_data_capture_go/issues)
- ğŸ’¬ **è®¨è®º**: [GitHub Discussions](https://github.com/Feng4/movie_data_capture_go/discussions)

### æ—¥å¿—å’Œè°ƒè¯•

**ç”Ÿæˆè°ƒè¯•æ—¥å¿—**:
```bash
./mdc -debug -logdir "./logs" -file "test.mp4"
```

**æ£€æŸ¥é…ç½®**:
```bash
./mdc -config config.yaml -version
```

**æµ‹è¯•ç½‘ç»œè¿æ¥**:
```bash
./mdc -search "TEST-001" -debug
```

---

## ç‰ˆæœ¬å†å²

### v1.0.0 (2024-08-30)
- âœ¨ é¦–ä¸ªæ­£å¼ç‰ˆæœ¬å‘å¸ƒ
- ğŸš€ æ”¯æŒå¤šç«™ç‚¹æ•°æ®æŠ“å–
- ğŸ¯ æ™ºèƒ½åˆ†ç‰‡æ–‡ä»¶å¤„ç†
- ğŸ“Š NFOæ–‡ä»¶ç”Ÿæˆ
- ğŸ–¼ï¸ å›¾ç‰‡ä¸‹è½½å’Œå¤„ç†
- ğŸŒ ä»£ç†æ”¯æŒ
- ğŸ”— STRMæ–‡ä»¶ç”ŸæˆåŠŸèƒ½

---

**æ„Ÿè°¢ä½¿ç”¨ Movie Data Capture Goï¼**

å¦‚æœè¿™ä¸ªå·¥å…·å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·è€ƒè™‘ç»™é¡¹ç›®ä¸€ä¸ª â­ Starï¼