# Movie Data Capture Go Version

[![Go Version](https://img.shields.io/badge/Go-1.21+-blue.svg)](https://golang.org/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/Platform-Windows%20%7C%20Linux%20%7C%20macOS-lightgrey.svg)](#installation)

Movie Data Capture Go æ˜¯ä¸€ä¸ªç”¨ Go è¯­è¨€ç¼–å†™çš„ç”µå½±å…ƒæ•°æ®è‡ªåŠ¨æŠ“å–å’Œæ•´ç†å·¥å…·ã€‚å®ƒèƒ½å¤Ÿä»å¤šä¸ªç½‘ç«™æŠ“å–ç”µå½±ä¿¡æ¯ï¼Œç”Ÿæˆ NFO æ–‡ä»¶ï¼Œä¸‹è½½å°é¢å›¾ç‰‡ï¼Œå¹¶è‡ªåŠ¨æ•´ç†ç”µå½±æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•ç»“æ„ã€‚

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### æ ¸å¿ƒåŠŸèƒ½
- **å¤šç«™ç‚¹æ•°æ®æŠ“å–**: æ”¯æŒ JavaBusã€FANZAã€FC2ã€JavDBã€X-City ç­‰å¤šä¸ªæ•°æ®æº
- **æ™ºèƒ½ç•ªå·è§£æ**: è‡ªåŠ¨ä»æ–‡ä»¶åä¸­æå–ç•ªå·ä¿¡æ¯
- **åˆ†ç‰‡æ–‡ä»¶å¤„ç†**: è‡ªåŠ¨è¯†åˆ«å’Œå¤„ç†å¤šéƒ¨åˆ†ç”µå½±æ–‡ä»¶ï¼ˆCD1/CD2ã€Part1/Part2ç­‰ï¼‰
- **NFO æ–‡ä»¶ç”Ÿæˆ**: ç”Ÿæˆç¬¦åˆ Kodi/Jellyfin æ ‡å‡†çš„ NFO å…ƒæ•°æ®æ–‡ä»¶
- **å›¾ç‰‡ä¸‹è½½**: è‡ªåŠ¨ä¸‹è½½å°é¢å›¾ã€æµ·æŠ¥ã€å‰§ç…§ç­‰
- **æ–‡ä»¶æ•´ç†**: æŒ‰ç…§è‡ªå®šä¹‰è§„åˆ™æ•´ç†æ–‡ä»¶ç›®å½•ç»“æ„

### é«˜çº§åŠŸèƒ½
- **äººè„¸æ£€æµ‹**: è‡ªåŠ¨è£å‰ªæ¼”å‘˜å¤´åƒ
- **æ°´å°å¤„ç†**: ä¸ºå›¾ç‰‡æ·»åŠ è‡ªå®šä¹‰æ°´å°
- **ç¿»è¯‘æ”¯æŒ**: è‡ªåŠ¨ç¿»è¯‘æ ‡é¢˜å’Œç®€ä»‹ä¸ºä¸­æ–‡
- **ä»£ç†æ”¯æŒ**: æ”¯æŒ HTTP/SOCKS5 ä»£ç†
- **å¤šçº¿ç¨‹å¤„ç†**: æ”¯æŒå¹¶å‘å¤„ç†æé«˜æ•ˆç‡
- **å¤±è´¥é‡è¯•**: æ™ºèƒ½é‡è¯•æœºåˆ¶å¤„ç†ç½‘ç»œå¼‚å¸¸
- **STRMæ–‡ä»¶ç”Ÿæˆ**: ä¸ºåª’ä½“ä¸­å¿ƒç”ŸæˆSTRMæ–‡ä»¶ï¼Œæ”¯æŒè½¯é“¾æ¥æ’­æ”¾

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚

- Go 1.21 æˆ–æ›´é«˜ç‰ˆæœ¬
- ç¨³å®šçš„ç½‘ç»œè¿æ¥ï¼ˆå»ºè®®ä½¿ç”¨ä»£ç†ï¼‰
- Windowsã€Linux æˆ– macOS æ“ä½œç³»ç»Ÿ

### å®‰è£…æ–¹æ³•

#### æ–¹æ³• 1: ä»æºç ç¼–è¯‘

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/Feng4/movie_data_capture_go.git
cd movie-data-capture-go

# ç¼–è¯‘ç¨‹åº
go mod download
go build -o mdc main.go

# è¿è¡Œç¨‹åº
./mdc
```

#### æ–¹æ³• 2: ç›´æ¥ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶

ä» [Releases](https://github.com/Feng4/movie_data_capture_go/releases) é¡µé¢ä¸‹è½½é€‚åˆä½ ç³»ç»Ÿçš„é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ã€‚

### åŸºæœ¬ä½¿ç”¨

1. **é…ç½®è®¾ç½®**: ç¼–è¾‘ `config.yaml` æ–‡ä»¶
2. **å¤„ç†å•ä¸ªæ–‡ä»¶**:
   ```bash
   ./mdc -file "SSIS-001.mp4"
   ```
3. **æ‰¹é‡å¤„ç†ç›®å½•**:
   ```bash
   ./mdc -path "/path/to/movies"
   ```
4. **æœç´¢ç•ªå·ä¿¡æ¯**:
   ```bash
   ./mdc -search "SSIS-001"
   ```

## ğŸ“‹ å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `-config` | é…ç½®æ–‡ä»¶è·¯å¾„ | `-config config.yaml` |
| `-file` | å•ä¸ªæ–‡ä»¶å¤„ç† | `-file "movie.mp4"` |
| `-path` | å¤„ç†ç›®å½•è·¯å¾„ | `-path "/movies"` |
| `-number` | è‡ªå®šä¹‰ç•ªå· | `-number "SSIS-001"` |
| `-mode` | è¿è¡Œæ¨¡å¼ (1=æŠ“å–, 2=æ•´ç†, 3=åˆ†æ) | `-mode 1` |
| `-search` | æœç´¢ç•ªå· | `-search "SSIS-001"` |
| `-source` | æŒ‡å®šæ•°æ®æº | `-source "javbus"` |
| `-url` | æŒ‡å®šURL | `-url "https://..."` |
| `-debug` | å¯ç”¨è°ƒè¯•æ¨¡å¼ | `-debug` |
| `-version` | æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ | `-version` |
| `-logdir` | æ—¥å¿—ç›®å½• | `-logdir "./logs"` |

## âš™ï¸ é…ç½®è¯´æ˜

### åŸºç¡€é…ç½® (`config.yaml`)

```yaml
common:
  main_mode: 1                          # 1=æŠ“å–, 2=æ•´ç†, 3=åˆ†æ
  source_folder: "./"                   # æºæ–‡ä»¶å¤¹
  success_output_folder: "JAV_output"   # æˆåŠŸè¾“å‡ºæ–‡ä»¶å¤¹
  failed_output_folder: "failed"       # å¤±è´¥è¾“å‡ºæ–‡ä»¶å¤¹
  link_mode: 0                         # 0=ç§»åŠ¨, 1=è½¯é“¾æ¥, 2=ç¡¬é“¾æ¥

proxy:
  switch: true                         # å¯ç”¨ä»£ç†
  proxy: "127.0.0.1:10808"            # ä»£ç†åœ°å€
  type: "socks5"                       # ä»£ç†ç±»å‹

name_rule:
  location_rule: "actor + '/' + number"        # æ–‡ä»¶å¤¹è§„åˆ™
  naming_rule: "number + '-' + title"          # å‘½åè§„åˆ™
  max_title_len: 50                            # æœ€å¤§æ ‡é¢˜é•¿åº¦

strm:
  enable: false                                # å¯ç”¨STRMæ–‡ä»¶ç”Ÿæˆ
  path_type: "absolute"                        # è·¯å¾„ç±»å‹: absolute, relative, network
  content_mode: "simple"                       # å†…å®¹æ¨¡å¼: simple, detailed, playlist
  multipart_mode: "separate"                   # åˆ†ç‰‡æ¨¡å¼: separate, combined
```

### æ”¯æŒçš„ç½‘ç«™ä¼˜å…ˆçº§

```yaml
priority:
  website: "javbus,fanza,fc2,fc2club,javdb,xcity,mgstage"
```

## ğŸ¨ è¾“å‡ºç»“æ„

å¤„ç†å®Œæˆåï¼Œæ–‡ä»¶å°†æŒ‰ä»¥ä¸‹ç»“æ„æ•´ç†ï¼š

```
JAV_output/
â”œâ”€â”€ æ¼”å‘˜å/
â”‚   â”œâ”€â”€ SSIS-001-ç”µå½±æ ‡é¢˜/
â”‚   â”‚   â”œâ”€â”€ SSIS-001.mp4           # ç”µå½±æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ SSIS-001.nfo           # å…ƒæ•°æ®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ poster.jpg             # æµ·æŠ¥
â”‚   â”‚   â”œâ”€â”€ fanart.jpg             # å°é¢
â”‚   â”‚   â”œâ”€â”€ thumb.jpg              # ç¼©ç•¥å›¾
â”‚   â”‚   â””â”€â”€ extrafanart/           # é¢å¤–å›¾ç‰‡
â”‚   â”‚       â”œâ”€â”€ extrafanart-1.jpg
â”‚   â”‚       â””â”€â”€ extrafanart-2.jpg
```

## ğŸ”§ åˆ†ç‰‡æ–‡ä»¶å¤„ç†

ç¨‹åºèƒ½å¤Ÿæ™ºèƒ½è¯†åˆ«å’Œå¤„ç†åˆ†ç‰‡æ–‡ä»¶ï¼š

- **CD æ ¼å¼**: `SSIS-001-cd1.mp4`, `SSIS-001-cd2.mp4`
- **Part æ ¼å¼**: `SSIS-001_part_1.mp4`, `SSIS-001_part_2.mp4`
- **æ•°å­—æ ¼å¼**: `SSIS-001_1.mp4`, `SSIS-001_2.mp4`
- **å­—æ¯æ ¼å¼**: `SSIS-001-A.mp4`, `SSIS-001-B.mp4`
- **Disc æ ¼å¼**: `SSIS-001-disc1.mkv`, `SSIS-001-disc2.mkv`

## ğŸŒ æ”¯æŒçš„æ•°æ®æº

| ç½‘ç«™ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| JavBus | ç»¼åˆ | ä¸»è¦æ•°æ®æº |
| FANZA | å®˜æ–¹ | é«˜è´¨é‡æ•°æ® |
| JavDB | ç»¼åˆ | å¤‡ç”¨æ•°æ®æº |
| FC2 | ç´ äºº | FC2 ä½œå“ä¸“ç”¨ |
| X-City | æ— ç  | æ— ç ä½œå“ |
| MGStage | ç»¼åˆ | å¤‡ç”¨æ•°æ®æº |

## ğŸ“Š é¡¹ç›®ç»“æ„

```
movie-data-capture/
â”œâ”€â”€ cmd/                    # å‘½ä»¤è¡Œå…¥å£
â”œâ”€â”€ internal/              # å†…éƒ¨åŒ…
â”‚   â”œâ”€â”€ config/           # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ core/             # æ ¸å¿ƒå¤„ç†é€»è¾‘
â”‚   â””â”€â”€ scraper/          # æ•°æ®æŠ“å–å™¨
â”œâ”€â”€ pkg/                   # å…¬å…±åŒ…
â”‚   â”œâ”€â”€ downloader/       # ä¸‹è½½å™¨
â”‚   â”œâ”€â”€ fragment/         # åˆ†ç‰‡æ–‡ä»¶å¤„ç†
â”‚   â”œâ”€â”€ httpclient/       # HTTP å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ logger/           # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”œâ”€â”€ nfo/              # NFO ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ parser/           # ç•ªå·è§£æå™¨
â”‚   â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
â”œâ”€â”€ config.yaml           # é…ç½®æ–‡ä»¶
â””â”€â”€ main.go               # ç¨‹åºå…¥å£
```

## ğŸ§ª æµ‹è¯•å·¥å…·

é¡¹ç›®åŒ…å«å¤šä¸ªæµ‹è¯•å·¥å…·ç”¨äºè°ƒè¯•å’ŒéªŒè¯åŠŸèƒ½ï¼š

- `debug_fragment_processing.go` - åˆ†ç‰‡å¤„ç†è°ƒè¯•
- `test_fragment_detection.go` - åˆ†ç‰‡æ£€æµ‹æµ‹è¯•
- `test_fragment_integration.go` - é›†æˆæµ‹è¯•
- `test_main_with_fragments.go` - ä¸»ç¨‹åºæµ‹è¯•

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼š

1. **æŠ¥å‘Šé—®é¢˜**: åœ¨ [Issues](https://github.com/Feng4/movie_data_capture_go/issues) ä¸­æŠ¥å‘Š Bug
2. **åŠŸèƒ½å»ºè®®**: æå‡ºæ–°åŠŸèƒ½æƒ³æ³•
3. **ä»£ç è´¡çŒ®**: æäº¤ Pull Request
4. **æ–‡æ¡£æ”¹è¿›**: å®Œå–„æ–‡æ¡£å’Œç¤ºä¾‹

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/Feng4/movie_data_capture_go.git
cd movie-data-capture-go

# å®‰è£…ä¾èµ–
go mod download

# è¿è¡Œæµ‹è¯•
go test ./...

# ç¼–è¯‘ç¨‹åº
go build -o mdc main.go
```

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-08-30)
- âœ¨ é¦–ä¸ªæ­£å¼ç‰ˆæœ¬å‘å¸ƒ
- ğŸš€ æ”¯æŒå¤šç«™ç‚¹æ•°æ®æŠ“å–
- ğŸ¯ æ™ºèƒ½åˆ†ç‰‡æ–‡ä»¶å¤„ç†
- ğŸ“Š NFO æ–‡ä»¶ç”Ÿæˆ
- ğŸ–¼ï¸ å›¾ç‰‡ä¸‹è½½å’Œå¤„ç†
- ğŸŒ ä»£ç†æ”¯æŒ

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## âš ï¸ å…è´£å£°æ˜

æœ¬å·¥å…·ä»…ç”¨äºåˆæ³•çš„ä¸ªäººåª’ä½“åº“ç®¡ç†ç›®çš„ã€‚è¯·éµå®ˆå½“åœ°æ³•å¾‹æ³•è§„ï¼Œå°Šé‡ç‰ˆæƒå’Œéšç§ã€‚å¼€å‘è€…ä¸å¯¹ä½¿ç”¨æœ¬å·¥å…·äº§ç”Ÿçš„ä»»ä½•æ³•å¾‹é—®é¢˜æ‰¿æ‹…è´£ä»»ã€‚

## ğŸ“ æ”¯æŒä¸åé¦ˆ

- ğŸ› é—®é¢˜åé¦ˆ: [GitHub Issues](https://github.com/Feng4/movie_data_capture_go/issues)

## ğŸ™ è‡´è°¢

[sqzw-x/mdcx](https://github.com/sqzw-x/mdcx)<br/>
[mvdctop/Movie_Data_Capture](https://github.com/mvdctop/Movie_Data_Capture)


---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ª Starï¼**
