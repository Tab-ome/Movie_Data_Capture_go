# 🔍 正则表达式番号识别指南

## 📋 内置的11种预定义正则模式

### 1️⃣ 标准格式
**适用场景**: 最常见的番号格式

**正则表达式**: `(?i)([a-z]+)[-_](\d+)`

**说明**:
- 📌 最常用的番号格式
- • 字母+破折号/下划线+数字
- • 大小写不敏感
- • 自动规范化为大写+破折号

**匹配示例**:
- ✅ ABC-123
- ✅ ipx-456
- ✅ SSIS_789
- ✅ 4k2.com@ipzz-655 (会自动清理前缀)

---

### 2️⃣ 复杂格式
**适用场景**: 多字母组合的厂商系列

**正则表达式**: `(?i)([a-z]+[-_][a-z]+)[-_](\d+)`

**说明**:
- 📌 多字母组合的番号
- • 两组字母+破折号+数字
- • 常见于特定厂商系列

**匹配示例**:
- ✅ MKY-NS-001
- ✅ T28-123
- ✅ ABP-XYZ-456

---

### 3️⃣ FC2格式
**适用场景**: FC2素人系列

**正则表达式**: `(?i)FC2[-_]?(?:PPV[-_]?)?(\d+)`

**说明**:
- 📌 FC2专用格式
- • 支持 FC2/FC2-PPV 等变体
- • 自动提取纯数字部分

**匹配示例**:
- ✅ FC2-1234567
- ✅ FC2PPV-1234567
- ✅ fc2_ppv_1234567

---

### 4️⃣ 纯数字格式
**适用场景**: FANZA CID等官方编号

**正则表达式**: `^(\d{6,})$`

**说明**:
- 📌 FANZA CID等纯数字番号
- • 至少6位数字
- • 常见于FANZA官方编号

**匹配示例**:
- ✅ 123456
- ✅ 1234567890
- ❌ abc123 (必须纯数字)

---

### 5️⃣ 一本道/加勒比格式
**适用场景**: 日本无码片商

**正则表达式**: `(?i)(\d{6})[-_](\d{3})`

**说明**:
- 📌 无码片商专用格式
- • 6位数字+破折号+3位数字
- • 一本道、加勒比、Pacopacomama等

**匹配示例**:
- ✅ 123456-789
- ✅ 010122_001
- ✅ 1pondo 123456_789

---

### 6️⃣ Tokyo Hot格式
**适用场景**: Tokyo Hot系列

**正则表达式**: `(?i)(cz|gedo|k|n|red-|se)(\d{2,4})`

**说明**:
- 📌 Tokyo Hot系列专用
- • 特定字母前缀+2-4位数字
- • n/k/cz/red等系列

**匹配示例**:
- ✅ n1234
- ✅ k0123
- ✅ red-123
- ✅ cz012
- ✅ se0456

---

### 7️⃣ Heyzo格式
**适用场景**: Heyzo站点

**正则表达式**: `(?i)heyzo[-_]?(\d{4})`

**说明**:
- 📌 Heyzo站点专用
- • heyzo+4位数字
- • 支持带/不带破折号

**匹配示例**:
- ✅ HEYZO-1234
- ✅ heyzo1234
- ✅ Heyzo_2345

---

### 8️⃣ X-Art格式
**适用场景**: 欧美高端系列

**正则表达式**: `(?i)x-art\.(\d{2})\.(\d{2})\.(\d{2})`

**说明**:
- 📌 X-Art站点专用
- • 日期格式: YY.MM.DD
- • 欧美高端系列

**匹配示例**:
- ✅ x-art.20.01.15
- ✅ X-Art.21.12.25

---

### 9️⃣ Heydouga格式
**适用场景**: 素人投稿系列

**正则表达式**: `(?i)heydouga[-_]?(\d{4})[-_](\d{3,5})`

**说明**:
- 📌 Heydouga站点专用
- • heydouga+4位+3-5位数字
- • 素人投稿系列

**匹配示例**:
- ✅ heydouga-4030-1234
- ✅ Heydouga_4017_12345

---

### 🔟 通用提取格式
**适用场景**: 已规范化的文件名

**正则表达式**: `([A-Z]{2,}-\d{3,})`

**说明**:
- 📌 严格格式提取
- • 至少2个大写字母+破折号+至少3个数字
- • 适合已规范化的文件名

**匹配示例**:
- ✅ ABC-123
- ✅ ABCD-1234
- ❌ abc-123 (需大写)

---

### 1️⃣1️⃣ 带网站前缀格式
**适用场景**: 网站水印文件名

**正则表达式**: `(?i)(?:\w+\.(?:com|net|cc|org|xyz)@)?([a-z]{3,}[-_]\d{3,})`

**说明**:
- 📌 自动清理网站前缀
- • 支持 xxx.com@, xxx.net@ 等
- • 提取真正的番号部分

**匹配示例**:
- ✅ 4k2.com@ipzz-655 → IPZZ-655
- ✅ xxx.net@abc-123 → ABC-123

---

## 🎯 使用方法

### 方法1: 使用默认规则（推荐）
无需配置，程序会自动按以下顺序尝试：
1. 自定义正则（如果配置了）
2. 特殊字典规则（11种预定义+内置规则）
3. 默认提取逻辑

### 方法2: 配置自定义正则
在 `config.yaml` 中：
```yaml
name_rule:
  number_regexs: "(?i)([a-z]+)[-_](\d+)"
```

多个正则用空格分隔：
```yaml
name_rule:
  number_regexs: "(?i)([a-z]+)[-_](\d+) (?i)FC2[-_]?(\d+)"
```

### 方法3: 使用GUI测试工具
1. 启动GUI程序
2. 点击 **"🔍 正则测试"** 页面
3. 选择预定义模式或输入自定义正则
4. 输入测试文件名
5. 点击 **"🚀 开始测试"** 查看结果

---

## 🔧 自动规范化规则

所有提取的番号都会自动规范化：

| 输入 | 规范化后 |
|------|----------|
| IPX_456 | IPX-456 |
| ppv-123456 | 123456 |
| fc-001 | 001 |
| abc234 | ABC-234 |
| ipx-456 | IPX-456 |

---

## 💡 高级技巧

### 1. 多番号文件名处理
当文件名包含多个番号时，**取最后一个匹配**：

```
输入: "[字幕组]ABC-001_preview_IPX-456.mp4"
匹配: [ABC-001, IPX-456]
输出: IPX-456 ✅ (通常是真正的番号)
```

### 2. 网站前缀自动清理
```
输入: "4k2.com@ipzz-655.mp4"
清理: 移除 "4k2.com@"
输出: IPZZ-655 ✅
```

### 3. 优先级顺序
```
自定义正则 > 特殊字典规则 > 默认提取逻辑
```

---

## 📞 支持的站点列表

- ✅ **有码**: JAV厂商系列（ABC-123格式）
- ✅ **FC2**: FC2-PPV素人系列
- ✅ **一本道**: 1pondo (6位-3位格式)
- ✅ **加勒比**: Caribbeancom (6位-3位格式)
- ✅ **Pacopacomama**: 6位_3位格式
- ✅ **Tokyo Hot**: n/k/cz/red系列
- ✅ **Heyzo**: HEYZO-xxxx格式
- ✅ **X-Art**: 日期格式
- ✅ **Heydouga**: heydouga-xxxx-xxxxx格式
- ✅ **FANZA**: 纯数字CID格式

---

## 🧪 测试示例

在GUI正则测试页面输入以下文件名测试：

```
ABC-123.mp4
ipx-456_HD.avi
FC2PPV-1234567.mkv
4k2.com@ssis-789.mp4
123456-789.mp4
HEYZO-1234.mp4
n1234.mp4
x-art.20.01.15.mp4
```

预期所有文件都能正确识别番号！

---

**最后更新**: 2025-11-01
**版本**: v2.0 - 增强版正则引擎

